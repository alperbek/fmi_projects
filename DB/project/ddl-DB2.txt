--<ScriptOptions statementTerminator="!"/>

CREATE SCHEMA PUBLISHINGHOUSE!

CREATE TABLE LOGISTICCENTRE_BOOK (
		LOGISTICCENTRE_NAME VARCHAR(50) NOT NULL,
		BOOK_ISBN VARCHAR(13) NOT NULL,
		STOCK INTEGER
	)
	DATA CAPTURE NONE 
	IN USERSPACE1!

CREATE TABLE CONTRACT (
		TYPE VARCHAR(50) NOT NULL,
		NUMBER INTEGER NOT NULL GENERATED ALWAYS AS IDENTITY ( START WITH 1000 INCREMENT BY 1 MINVALUE 1000 MAXVALUE 2147483647 NO CYCLE CACHE 20),
		DESCRIPTION VARCHAR(2000) NOT NULL,
		START_DATE DATE DEFAULT CURRENT DATE NOT NULL,
		END_DATE DATE DEFAULT NULL
	)
	DATA CAPTURE NONE 
	IN USERSPACE1!

CREATE TABLE PARTNER (
		NAME VARCHAR(50) NOT NULL,
		TYPE VARCHAR(50) NOT NULL,
		ADDRESS VARCHAR(100) NOT NULL,
		CONTRACT_NUMBER INTEGER NOT NULL
	)
	DATA CAPTURE NONE 
	IN USERSPACE1!

CREATE TABLE BILL (
		BILL_TYPE VARCHAR(40) NOT NULL,
		BILL_NUMBER INTEGER NOT NULL,
		DATE DATE DEFAULT CURRENT DATE NOT NULL,
		MONEY DECIMAL(5 , 0) NOT NULL,
		DESCRIPTION VARCHAR(2000) NOT NULL,
		CONTRACT_NUMBER INTEGER NOT NULL
	)
	DATA CAPTURE NONE 
	IN USERSPACE1!

CREATE TABLE EMPLOYEE_LOGISTICCENTRE (
		EMPLOYEE_EGN CHAR(10) NOT NULL,
		LOGISTICCENTRE_NAME VARCHAR(50) NOT NULL
	)
	DATA CAPTURE NONE 
	IN USERSPACE1!

CREATE TABLE BOOK (
		ISBN VARCHAR(13) NOT NULL,
		TITLE VARCHAR(96) NOT NULL,
		AUTHOR VARCHAR(49) NOT NULL,
		NUMPAGES INTEGER NOT NULL,
		ORIGINALLANGUAGE VARCHAR(25) NOT NULL
	)
	DATA CAPTURE NONE 
	IN USERSPACE1!

CREATE TABLE WORKINGON (
		EMPEGN INTEGER NOT NULL,
		BOOKISBN VARCHAR(13) NOT NULL
	)
	DATA CAPTURE NONE 
	IN USERSPACE1!

CREATE TABLE PRINTED (
		PRHOUSENAME VARCHAR(150) NOT NULL,
		BISBN VARCHAR(13) NOT NULL,
		PRINTORDERDATE DATE NOT NULL,
		NUMCOPPIES INTEGER NOT NULL
	)
	DATA CAPTURE NONE 
	IN USERSPACE1!

CREATE TABLE LOGISTIC_CENTRE (
		NAME VARCHAR(50) NOT NULL,
		ADDRESS VARCHAR(150)
	)
	DATA CAPTURE NONE 
	IN USERSPACE1!

CREATE TABLE ASSETS (
		ASSETID INTEGER NOT NULL,
		DESCRIPTION VARCHAR(50) NOT NULL,
		document type VARCHAR(10) NOT NULL,
		document number INTEGER NOT NULL,
		ORIGIN VARCHAR(20),
		YEAR INTEGER,
		Initial value DOUBLE,
		annual depreciation DOUBLE
	)
	DATA CAPTURE NONE 
	IN USERSPACE1!

CREATE TABLE DOG (
		ID INTEGER NOT NULL GENERATED ALWAYS AS IDENTITY ( START WITH 1 INCREMENT BY 1 MINVALUE 1 MAXVALUE 2147483647 NO CYCLE CACHE 20)
	)
	DATA CAPTURE NONE 
	IN USERSPACE1!

CREATE TABLE PRINTINGHOUSE (
		NAME CHAR(150) NOT NULL,
		ADDRESS VARCHAR(150) NOT NULL,
		CONTRACT_NUMBER INTEGER
	)
	DATA CAPTURE NONE 
	IN USERSPACE1!

CREATE TABLE EMPLOYEE (
		EGN CHAR(10) NOT NULL,
		NAME VARCHAR(50) NOT NULL,
		SALARY DECIMAL(5 , 0),
		TELEPHONE VARCHAR(15) NOT NULL,
		CONTRACT_NUMBER INTEGER NOT NULL,
		IBAN VARCHAR(35) NOT NULL
	)
	DATA CAPTURE NONE 
	IN USERSPACE1!

ALTER TABLE LOGISTICCENTRE_BOOK ADD CONSTRAINT SQL110531091909660 PRIMARY KEY
	(LOGISTICCENTRE_NAME,
	 BOOK_ISBN)!

ALTER TABLE CONTRACT ADD CONSTRAINT CONTRACT_PK PRIMARY KEY
	(NUMBER)!

ALTER TABLE PARTNER ADD CONSTRAINT PARTNER_PK PRIMARY KEY
	(NAME)!

ALTER TABLE PARTNER ADD CONSTRAINT CHECK_TYPE CHECK (TYPE IN (
'?????????? ????','????????? ????'))!

ALTER TABLE BILL ADD CONSTRAINT BILL_PK PRIMARY KEY
	(BILL_NUMBER,
	 BILL_TYPE)!

ALTER TABLE BILL ADD CONSTRAINT CHECK_TYPE CHECK (BILL_TYPE IN (
'???????? ??????? ???????','???????? ??????? ???????',
'???????? ????? ?????','???????? ????? ?????'))!

ALTER TABLE EMPLOYEE_LOGISTICCENTRE ADD CONSTRAINT SQL110602101757480 PRIMARY KEY
	(EMPLOYEE_EGN,
	 LOGISTICCENTRE_NAME)!

ALTER TABLE BOOK ADD CONSTRAINT SQL110531085214180 PRIMARY KEY
	(ISBN)!

ALTER TABLE BOOK ADD CONSTRAINT SQL110531085214210 CHECK (LENGTH(ISBN)=10 OR LENGTH(ISBN)=13)!

ALTER TABLE BOOK ADD CONSTRAINT SQL110531085214230 CHECK (NUMPAGES>0)!

ALTER TABLE WORKINGON ADD CONSTRAINT SQL110531085215000 PRIMARY KEY
	(EMPEGN,
	 BOOKISBN)!

ALTER TABLE PRINTED ADD CONSTRAINT SQL110531085439440 PRIMARY KEY
	(PRHOUSENAME,
	 BISBN,
	 PRINTORDERDATE)!

ALTER TABLE PRINTED ADD CONSTRAINT SQL110531085439510 CHECK (YEAR(PRINTORDERDATE)>1990)!

ALTER TABLE PRINTED ADD CONSTRAINT SQL110531085439530 CHECK (NUMCOPPIES>=50)!

ALTER TABLE LOGISTIC_CENTRE ADD CONSTRAINT PK_LOGCEN PRIMARY KEY
	(NAME)!

ALTER TABLE ASSETS ADD CONSTRAINT PK_AS PRIMARY KEY
	(ASSETID)!

ALTER TABLE ASSETS ADD CONSTRAINT SQL110531161143510 CHECK ("annual depreciation" > 0 and "annual depreciation" < 100)!

ALTER TABLE DOG ADD CONSTRAINT SQL110602102901810 PRIMARY KEY
	(ID)!

ALTER TABLE PRINTINGHOUSE ADD CONSTRAINT SQL110602073847310 PRIMARY KEY
	(NAME)!

ALTER TABLE EMPLOYEE ADD CONSTRAINT EMPLOYEE_PK PRIMARY KEY
	(EGN)!

ALTER TABLE LOGISTICCENTRE_BOOK ADD CONSTRAINT SQL110531091909720 FOREIGN KEY
	(LOGISTICCENTRE_NAME)
	REFERENCES LOGISTIC_CENTRE
	(NAME)!

ALTER TABLE LOGISTICCENTRE_BOOK ADD CONSTRAINT SQL110531091909760 FOREIGN KEY
	(BOOK_ISBN)
	REFERENCES BOOK
	(ISBN)!

ALTER TABLE PARTNER ADD CONSTRAINT CONTRACT_FK FOREIGN KEY
	(CONTRACT_NUMBER)
	REFERENCES CONTRACT
	(NUMBER)!

ALTER TABLE EMPLOYEE_LOGISTICCENTRE ADD CONSTRAINT SQL110602101757530 FOREIGN KEY
	(EMPLOYEE_EGN)
	REFERENCES EMPLOYEE
	(EGN)!

ALTER TABLE EMPLOYEE_LOGISTICCENTRE ADD CONSTRAINT SQL110602101757590 FOREIGN KEY
	(LOGISTICCENTRE_NAME)
	REFERENCES LOGISTIC_CENTRE
	(NAME)!

ALTER TABLE WORKINGON ADD CONSTRAINT SQL110531085215090 FOREIGN KEY
	(BOOKISBN)
	REFERENCES BOOK
	(ISBN)!

ALTER TABLE PRINTED ADD CONSTRAINT SQL110531085439490 FOREIGN KEY
	(BISBN)
	REFERENCES BOOK
	(ISBN)!

ALTER TABLE PRINTINGHOUSE ADD CONSTRAINT CONTRACT_FK FOREIGN KEY
	(CONTRACT_NUMBER)
	REFERENCES CONTRACT
	(NUMBER)!

ALTER TABLE EMPLOYEE ADD CONSTRAINT CONTRACT_FK FOREIGN KEY
	(CONTRACT_NUMBER)
	REFERENCES CONTRACT
	(NUMBER)!

GRANT CREATEIN ON SCHEMA PUBLISHINGHOUSE TO  PUBLIC!

